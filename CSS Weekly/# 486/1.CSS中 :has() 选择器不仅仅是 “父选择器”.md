# CSS中 :has() 选择器不仅仅是一个“父选择器”

![](https://cdn.jsdelivr.net/gh/daodaolee/photobed@main/img/20220104151801.png)

> Safari 技术预览版 137 刚刚发布，对 CSS :has() 提供未标记的支持。通常被称为“父选择器”的 :has() 远不止于此……

## CSS `:has()`?

根据 [selectors-4规范](https://drafts.csswg.org/selectors-4/#has-pseudo)：

> 如果任何带参数的选择器至少匹配一个元素，那么`:has()` 伪类就代表一个元素。

该选择器被称为“父选择器”，默认情况确实允许您选择具有某些子元素的父元素。

```css
/* 匹配包含 <img> 子元素的 <a> 元素 */
a:has(img) { … }

/* 匹配包含<img>直接后代子元素的<a>元素 */
a:has(> img) { … }

/* 匹配不包含任何H元素的 <section> 元素：: */
section:not(:has(h1, h2, h3, h4, h5, h6))
```

赞！

## 不仅仅是父选择器哦

`:has()` 不仅仅是一个父选择器。正如 Adrian Bece 在 [Smashing Magazine](https://www.smashingmagazine.com/2021/06/has-native-css-parent-selector/#css-has-pseudo-class-specification) 上的帖子中所分享的：

```css
/* 匹配具有 <figcaption> 作为子元素的 <figure> 元素 */
figure:has(figcaption) { … }

/* 匹配包含 <figcaption> 子元素的 <figure> 的子元素的 <img> 元素 */
figure:has(figcaption) img { … }
```

下面是规范中的另一个示例：

```css
/* 仅当 <p> 元素紧随其后时才匹配 <h1> 元素 */
h1:has(+ p) { … }
```

当然它也支持 `+`, `~`, `>` …只要是符合 `<forgiving-relative-selector-list>` 的参数都可以。

## 其他特性

就像 `:is()` 一样，`:has()` 具有以下特定特征：

1. `:has()` 选择器的预发是易用的
2. `:has()` 的特性在于它传的参数

## 浏览器兼容

如前所述，当前只有Safari TP 137支持它（未标记），Chromium团队目前也在努力实现它，关于火狐浏览器还没有消息。

- WebKit/Safari: [Issue #227702](https://bugs.webkit.org/show_bug.cgi?id=227702) — 已解决
- Blink/Chromium: [Issue #669058](https://bugs.chromium.org/p/chromium/issues/detail?id=669058) — 进行中
- Gecko/Firefox: [Issue #418039](https://bugzilla.mozilla.org/show_bug.cgi?id=418039) — 进行中
