<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Building An Effective Image Component | Weekly Tracker</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?42838d5683674819691a92f6ebdf25d8";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();
      </script>        
      </script>
    <meta name="description" content="追踪国外最流行的周刊">
    
    <link rel="preload" href="/assets/css/0.styles.df856fea.css" as="style"><link rel="preload" href="/assets/js/app.753e2338.js" as="script"><link rel="preload" href="/assets/js/4.c9e0fe93.js" as="script"><link rel="preload" href="/assets/js/1.fdc351be.js" as="script"><link rel="preload" href="/assets/js/57.7d0ccef5.js" as="script"><link rel="preload" href="/assets/js/10.830b4516.js" as="script"><link rel="prefetch" href="/assets/js/100.6b3e0ec3.js"><link rel="prefetch" href="/assets/js/101.2c8842f6.js"><link rel="prefetch" href="/assets/js/102.ad3df0d1.js"><link rel="prefetch" href="/assets/js/103.ebfb7fec.js"><link rel="prefetch" href="/assets/js/104.5db97244.js"><link rel="prefetch" href="/assets/js/105.789fe30b.js"><link rel="prefetch" href="/assets/js/106.10e61e2f.js"><link rel="prefetch" href="/assets/js/107.14443297.js"><link rel="prefetch" href="/assets/js/108.5a58e519.js"><link rel="prefetch" href="/assets/js/109.ab526113.js"><link rel="prefetch" href="/assets/js/11.16bc7ca3.js"><link rel="prefetch" href="/assets/js/110.6904573b.js"><link rel="prefetch" href="/assets/js/111.3fe45f8f.js"><link rel="prefetch" href="/assets/js/112.fe97363f.js"><link rel="prefetch" href="/assets/js/113.0fd31e28.js"><link rel="prefetch" href="/assets/js/114.ad03ee65.js"><link rel="prefetch" href="/assets/js/115.8a413da1.js"><link rel="prefetch" href="/assets/js/116.b1fae3cf.js"><link rel="prefetch" href="/assets/js/117.3e0c21e2.js"><link rel="prefetch" href="/assets/js/118.33dc4acb.js"><link rel="prefetch" href="/assets/js/119.a560f4bf.js"><link rel="prefetch" href="/assets/js/12.23851441.js"><link rel="prefetch" href="/assets/js/120.eaf01819.js"><link rel="prefetch" href="/assets/js/121.475a2a17.js"><link rel="prefetch" href="/assets/js/122.138bddcc.js"><link rel="prefetch" href="/assets/js/123.efd903e9.js"><link rel="prefetch" href="/assets/js/124.0257d11c.js"><link rel="prefetch" href="/assets/js/125.0ae2d588.js"><link rel="prefetch" href="/assets/js/126.9be66087.js"><link rel="prefetch" href="/assets/js/127.71b828ab.js"><link rel="prefetch" href="/assets/js/128.3aaccbe7.js"><link rel="prefetch" href="/assets/js/129.aebe8782.js"><link rel="prefetch" href="/assets/js/13.5bdf3bdd.js"><link rel="prefetch" href="/assets/js/130.88c9eab0.js"><link rel="prefetch" href="/assets/js/131.9e10f5f3.js"><link rel="prefetch" href="/assets/js/132.b6921c29.js"><link rel="prefetch" href="/assets/js/133.85182b91.js"><link rel="prefetch" href="/assets/js/134.58457997.js"><link rel="prefetch" href="/assets/js/135.fd6af072.js"><link rel="prefetch" href="/assets/js/136.7e5abce8.js"><link rel="prefetch" href="/assets/js/137.b877464c.js"><link rel="prefetch" href="/assets/js/138.836d4f3d.js"><link rel="prefetch" href="/assets/js/139.8a1e9ea4.js"><link rel="prefetch" href="/assets/js/14.5cef0163.js"><link rel="prefetch" href="/assets/js/140.69489ff6.js"><link rel="prefetch" href="/assets/js/141.64ffd0c9.js"><link rel="prefetch" href="/assets/js/142.a2d20c58.js"><link rel="prefetch" href="/assets/js/143.dca7cb7d.js"><link rel="prefetch" href="/assets/js/144.baecc045.js"><link rel="prefetch" href="/assets/js/145.a7affed9.js"><link rel="prefetch" href="/assets/js/146.df293618.js"><link rel="prefetch" href="/assets/js/147.36f7d18e.js"><link rel="prefetch" href="/assets/js/148.4b92b4f4.js"><link rel="prefetch" href="/assets/js/149.6df4c04f.js"><link rel="prefetch" href="/assets/js/15.91858bc2.js"><link rel="prefetch" href="/assets/js/150.90aa5f92.js"><link rel="prefetch" href="/assets/js/151.0bafaa2a.js"><link rel="prefetch" href="/assets/js/152.f84247a0.js"><link rel="prefetch" href="/assets/js/153.96284f30.js"><link rel="prefetch" href="/assets/js/154.38b315f2.js"><link rel="prefetch" href="/assets/js/155.c50bb540.js"><link rel="prefetch" href="/assets/js/156.337a030d.js"><link rel="prefetch" href="/assets/js/157.1fdc4560.js"><link rel="prefetch" href="/assets/js/158.87cda35d.js"><link rel="prefetch" href="/assets/js/159.8604032e.js"><link rel="prefetch" href="/assets/js/16.fec23e3e.js"><link rel="prefetch" href="/assets/js/160.37bb4cd9.js"><link rel="prefetch" href="/assets/js/161.e876d055.js"><link rel="prefetch" href="/assets/js/162.3b17b4e5.js"><link rel="prefetch" href="/assets/js/163.f8ed2597.js"><link rel="prefetch" href="/assets/js/164.b2074699.js"><link rel="prefetch" href="/assets/js/165.95063448.js"><link rel="prefetch" href="/assets/js/166.8e081e06.js"><link rel="prefetch" href="/assets/js/167.86c21232.js"><link rel="prefetch" href="/assets/js/168.8e5654a6.js"><link rel="prefetch" href="/assets/js/169.8bf35561.js"><link rel="prefetch" href="/assets/js/17.656a837e.js"><link rel="prefetch" href="/assets/js/170.bcd6be25.js"><link rel="prefetch" href="/assets/js/171.6b17a2a2.js"><link rel="prefetch" href="/assets/js/172.eba03431.js"><link rel="prefetch" href="/assets/js/173.3a932b04.js"><link rel="prefetch" href="/assets/js/174.8e97be1b.js"><link rel="prefetch" href="/assets/js/175.c5d132b1.js"><link rel="prefetch" href="/assets/js/176.0ab3ea76.js"><link rel="prefetch" href="/assets/js/177.f972770c.js"><link rel="prefetch" href="/assets/js/178.9c19cd5d.js"><link rel="prefetch" href="/assets/js/179.1f7527fe.js"><link rel="prefetch" href="/assets/js/18.1ac271d3.js"><link rel="prefetch" href="/assets/js/180.f8620634.js"><link rel="prefetch" href="/assets/js/181.cba1fb2a.js"><link rel="prefetch" href="/assets/js/182.8298849a.js"><link rel="prefetch" href="/assets/js/183.f4558eaa.js"><link rel="prefetch" href="/assets/js/184.76fbc11b.js"><link rel="prefetch" href="/assets/js/185.e68a5bba.js"><link rel="prefetch" href="/assets/js/186.4bac1cf6.js"><link rel="prefetch" href="/assets/js/187.102c242e.js"><link rel="prefetch" href="/assets/js/188.07f55ecf.js"><link rel="prefetch" href="/assets/js/189.c49ce3d4.js"><link rel="prefetch" href="/assets/js/19.49397e79.js"><link rel="prefetch" href="/assets/js/190.47e264be.js"><link rel="prefetch" href="/assets/js/191.5971256e.js"><link rel="prefetch" href="/assets/js/192.38ae1144.js"><link rel="prefetch" href="/assets/js/193.56c1324d.js"><link rel="prefetch" href="/assets/js/194.5133054d.js"><link rel="prefetch" href="/assets/js/195.ae9fa214.js"><link rel="prefetch" href="/assets/js/196.8189120f.js"><link rel="prefetch" href="/assets/js/197.cbb1f39c.js"><link rel="prefetch" href="/assets/js/198.b8496199.js"><link rel="prefetch" href="/assets/js/199.23e97b5e.js"><link rel="prefetch" href="/assets/js/2.667d6af0.js"><link rel="prefetch" href="/assets/js/20.cb982b00.js"><link rel="prefetch" href="/assets/js/200.3481222c.js"><link rel="prefetch" href="/assets/js/201.fceb577f.js"><link rel="prefetch" href="/assets/js/202.b656b1b9.js"><link rel="prefetch" href="/assets/js/203.23b4daf6.js"><link rel="prefetch" href="/assets/js/204.55495f9c.js"><link rel="prefetch" href="/assets/js/205.c04f619b.js"><link rel="prefetch" href="/assets/js/206.49a7ff70.js"><link rel="prefetch" href="/assets/js/207.39f0121a.js"><link rel="prefetch" href="/assets/js/208.e44f7188.js"><link rel="prefetch" href="/assets/js/209.acaacc89.js"><link rel="prefetch" href="/assets/js/21.82156d86.js"><link rel="prefetch" href="/assets/js/210.82316d6f.js"><link rel="prefetch" href="/assets/js/211.a9d8f767.js"><link rel="prefetch" href="/assets/js/212.ffdf2ce7.js"><link rel="prefetch" href="/assets/js/213.8f3dde06.js"><link rel="prefetch" href="/assets/js/214.890e5481.js"><link rel="prefetch" href="/assets/js/215.dd09274e.js"><link rel="prefetch" href="/assets/js/216.5a360e2b.js"><link rel="prefetch" href="/assets/js/217.689264d0.js"><link rel="prefetch" href="/assets/js/218.afbf6122.js"><link rel="prefetch" href="/assets/js/219.80b8d8d9.js"><link rel="prefetch" href="/assets/js/22.de850eb9.js"><link rel="prefetch" href="/assets/js/220.641bb904.js"><link rel="prefetch" href="/assets/js/221.cae2319a.js"><link rel="prefetch" href="/assets/js/222.a1020229.js"><link rel="prefetch" href="/assets/js/223.edec41df.js"><link rel="prefetch" href="/assets/js/224.1ea93d3b.js"><link rel="prefetch" href="/assets/js/225.ce0bcf44.js"><link rel="prefetch" href="/assets/js/226.efc5c785.js"><link rel="prefetch" href="/assets/js/227.81cf2ee9.js"><link rel="prefetch" href="/assets/js/228.d3b82e45.js"><link rel="prefetch" href="/assets/js/229.86c55fe1.js"><link rel="prefetch" href="/assets/js/23.9d14b7e6.js"><link rel="prefetch" href="/assets/js/230.d8218bfc.js"><link rel="prefetch" href="/assets/js/231.73f5464a.js"><link rel="prefetch" href="/assets/js/232.8241fec7.js"><link rel="prefetch" href="/assets/js/233.8e77c9fe.js"><link rel="prefetch" href="/assets/js/234.1da0d6c1.js"><link rel="prefetch" href="/assets/js/235.174797d0.js"><link rel="prefetch" href="/assets/js/236.8a649ca4.js"><link rel="prefetch" href="/assets/js/237.9303059a.js"><link rel="prefetch" href="/assets/js/238.713eef7b.js"><link rel="prefetch" href="/assets/js/239.577f7091.js"><link rel="prefetch" href="/assets/js/24.7263dac5.js"><link rel="prefetch" href="/assets/js/240.8fdcf95a.js"><link rel="prefetch" href="/assets/js/241.d0f11c83.js"><link rel="prefetch" href="/assets/js/242.5569dbd1.js"><link rel="prefetch" href="/assets/js/243.636a5829.js"><link rel="prefetch" href="/assets/js/244.69d5cad4.js"><link rel="prefetch" href="/assets/js/245.09cff17f.js"><link rel="prefetch" href="/assets/js/25.6c3cc1c1.js"><link rel="prefetch" href="/assets/js/26.d65fb15d.js"><link rel="prefetch" href="/assets/js/27.735c1e4f.js"><link rel="prefetch" href="/assets/js/28.8e122b02.js"><link rel="prefetch" href="/assets/js/29.f80a235e.js"><link rel="prefetch" href="/assets/js/30.118841db.js"><link rel="prefetch" href="/assets/js/31.ff0fc2a4.js"><link rel="prefetch" href="/assets/js/32.6c12b702.js"><link rel="prefetch" href="/assets/js/33.fecff164.js"><link rel="prefetch" href="/assets/js/34.6c4d1ace.js"><link rel="prefetch" href="/assets/js/35.8c1391a2.js"><link rel="prefetch" href="/assets/js/36.78896e5b.js"><link rel="prefetch" href="/assets/js/37.5ed29496.js"><link rel="prefetch" href="/assets/js/38.0b1404d5.js"><link rel="prefetch" href="/assets/js/39.97ca825a.js"><link rel="prefetch" href="/assets/js/40.f50d959a.js"><link rel="prefetch" href="/assets/js/41.9fb6ba76.js"><link rel="prefetch" href="/assets/js/42.737dfba1.js"><link rel="prefetch" href="/assets/js/43.78a01e9e.js"><link rel="prefetch" href="/assets/js/44.1a229448.js"><link rel="prefetch" href="/assets/js/45.fd1c11b8.js"><link rel="prefetch" href="/assets/js/46.dd14ab4e.js"><link rel="prefetch" href="/assets/js/47.c31fa5af.js"><link rel="prefetch" href="/assets/js/48.64611393.js"><link rel="prefetch" href="/assets/js/49.41602881.js"><link rel="prefetch" href="/assets/js/5.b0daf45f.js"><link rel="prefetch" href="/assets/js/50.471b93b3.js"><link rel="prefetch" href="/assets/js/51.46bc7429.js"><link rel="prefetch" href="/assets/js/52.577e5d5b.js"><link rel="prefetch" href="/assets/js/53.8dc2df53.js"><link rel="prefetch" href="/assets/js/54.d8905c3e.js"><link rel="prefetch" href="/assets/js/55.991662a4.js"><link rel="prefetch" href="/assets/js/56.64cbea21.js"><link rel="prefetch" href="/assets/js/58.4f598392.js"><link rel="prefetch" href="/assets/js/59.76f4c838.js"><link rel="prefetch" href="/assets/js/6.28cb02fd.js"><link rel="prefetch" href="/assets/js/60.944da0d2.js"><link rel="prefetch" href="/assets/js/61.da28081d.js"><link rel="prefetch" href="/assets/js/62.9c061a8c.js"><link rel="prefetch" href="/assets/js/63.b05aa92a.js"><link rel="prefetch" href="/assets/js/64.f4eed7f5.js"><link rel="prefetch" href="/assets/js/65.c5b4d4d8.js"><link rel="prefetch" href="/assets/js/66.88134142.js"><link rel="prefetch" href="/assets/js/67.d6ed5584.js"><link rel="prefetch" href="/assets/js/68.3c826a7b.js"><link rel="prefetch" href="/assets/js/69.8cb6ce7f.js"><link rel="prefetch" href="/assets/js/7.89ba5420.js"><link rel="prefetch" href="/assets/js/70.d7a6f725.js"><link rel="prefetch" href="/assets/js/71.afcbedd9.js"><link rel="prefetch" href="/assets/js/72.41340f5b.js"><link rel="prefetch" href="/assets/js/73.8df926e0.js"><link rel="prefetch" href="/assets/js/74.3279fa5a.js"><link rel="prefetch" href="/assets/js/75.1b52f91e.js"><link rel="prefetch" href="/assets/js/76.74364b58.js"><link rel="prefetch" href="/assets/js/77.b00f3f08.js"><link rel="prefetch" href="/assets/js/78.f6ff6ddc.js"><link rel="prefetch" href="/assets/js/79.4df80914.js"><link rel="prefetch" href="/assets/js/8.6c92a4c3.js"><link rel="prefetch" href="/assets/js/80.99f7c74f.js"><link rel="prefetch" href="/assets/js/81.f441d58d.js"><link rel="prefetch" href="/assets/js/82.f1c9e53f.js"><link rel="prefetch" href="/assets/js/83.421fb606.js"><link rel="prefetch" href="/assets/js/84.7c64155a.js"><link rel="prefetch" href="/assets/js/85.231a2b2d.js"><link rel="prefetch" href="/assets/js/86.33399d77.js"><link rel="prefetch" href="/assets/js/87.f79e2506.js"><link rel="prefetch" href="/assets/js/88.62054b72.js"><link rel="prefetch" href="/assets/js/89.357136d8.js"><link rel="prefetch" href="/assets/js/9.d72b7ad7.js"><link rel="prefetch" href="/assets/js/90.336bacd9.js"><link rel="prefetch" href="/assets/js/91.3a788ee8.js"><link rel="prefetch" href="/assets/js/92.2c7da18c.js"><link rel="prefetch" href="/assets/js/93.8343e793.js"><link rel="prefetch" href="/assets/js/94.1218e7b4.js"><link rel="prefetch" href="/assets/js/95.349d6786.js"><link rel="prefetch" href="/assets/js/96.3f279031.js"><link rel="prefetch" href="/assets/js/97.8d567112.js"><link rel="prefetch" href="/assets/js/98.8eba0e8d.js"><link rel="prefetch" href="/assets/js/99.9d65c958.js">
    <link rel="stylesheet" href="/assets/css/0.styles.df856fea.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-130b300a><div data-v-130b300a><div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-130b300a data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>Weekly Tracker</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>追踪国外最流行的周刊</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
            
          <!---->
          2022
        </a></span></div></div> <div class="hide" data-v-130b300a><header class="navbar" data-v-130b300a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/organization.png" alt="Weekly Tracker" class="logo"> <span class="site-name">Weekly Tracker</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  最新文章
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      所有周刊
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/CSS Weekly/" class="nav-link"><i class="undefined"></i>
  CSS Weekly
</a></li><li class="dropdown-item"><!----> <a href="/categories/Frontend Focus/" class="nav-link"><i class="undefined"></i>
  Frontend Focus
</a></li><li class="dropdown-item"><!----> <a href="/categories/JavaScript Weekly/" class="nav-link"><i class="undefined"></i>
  JavaScript Weekly
</a></li><li class="dropdown-item"><!----> <a href="/categories/Mobile Dev Weekly/" class="nav-link"><i class="undefined"></i>
  Mobile Dev Weekly
</a></li><li class="dropdown-item"><!----> <a href="/categories/Node Weekly/" class="nav-link"><i class="undefined"></i>
  Node Weekly
</a></li><li class="dropdown-item"><!----> <a href="/categories/React Status/" class="nav-link"><i class="undefined"></i>
  React Status
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  精选文章
</a></div><div class="nav-item"><a href="https://github.com/FEDarling/weekly-tracker" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://weekly.fedarling.com/rss.xml" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-bokeyuan"></i>
  RSS
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-130b300a></div> <aside class="sidebar" data-v-130b300a><div class="personal-info-wrapper" data-v-39576ba9 data-v-130b300a><!----> <!----> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>72</h3> <h6 data-v-39576ba9>文章</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>22</h3> <h6 data-v-39576ba9>标签</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  最新文章
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      所有周刊
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/CSS Weekly/" class="nav-link"><i class="undefined"></i>
  CSS Weekly
</a></li><li class="dropdown-item"><!----> <a href="/categories/Frontend Focus/" class="nav-link"><i class="undefined"></i>
  Frontend Focus
</a></li><li class="dropdown-item"><!----> <a href="/categories/JavaScript Weekly/" class="nav-link"><i class="undefined"></i>
  JavaScript Weekly
</a></li><li class="dropdown-item"><!----> <a href="/categories/Mobile Dev Weekly/" class="nav-link"><i class="undefined"></i>
  Mobile Dev Weekly
</a></li><li class="dropdown-item"><!----> <a href="/categories/Node Weekly/" class="nav-link"><i class="undefined"></i>
  Node Weekly
</a></li><li class="dropdown-item"><!----> <a href="/categories/React Status/" class="nav-link"><i class="undefined"></i>
  React Status
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  精选文章
</a></div><div class="nav-item"><a href="https://github.com/FEDarling/weekly-tracker" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://weekly.fedarling.com/rss.xml" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-bokeyuan"></i>
  RSS
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <ul class="sidebar-links"><li><a href="/frontend_focus/534/" class="sidebar-link">Frontend Focus #534</a></li><li><a href="/frontend_focus/529/" class="sidebar-link">Frontend Focus #529</a></li><li><a href="/frontend_focus/528/" class="sidebar-link">Frontend Focus #528</a></li><li><a href="/frontend_focus/527/" class="sidebar-link">Frontend Focus #527</a></li><li><a href="/frontend_focus/526/" class="sidebar-link">Frontend Focus #526</a></li><li><a href="/frontend_focus/525/" class="sidebar-link">Frontend Focus #525</a></li><li><a href="/frontend_focus/524/" class="sidebar-link">Frontend Focus #524</a></li><li><section class="sidebar-group depth-0"><a href="/frontend_focus/514/" class="sidebar-heading clickable router-link-active"><span>Frontend Focus #514</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend_focus/514/status_targeted_caching_headers.html" class="sidebar-link">现代 web 缓存中新的 Http 标准</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>Building An Effective Image Component</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
            
          <!---->
          2022
        </a></span></div></div> <div data-v-130b300a><main class="page"><section><div class="page-title"><h1 class="title">Building An Effective Image Component</h1> <div data-v-f875f3fc><!----> <i class="iconfont reco-date" data-v-f875f3fc><span data-v-f875f3fc>2022/1/25</span></i> <!----> <i class="tags iconfont reco-tag" data-v-f875f3fc><span class="tag-item" data-v-f875f3fc>CSS</span><span class="tag-item" data-v-f875f3fc>JavaScript</span><span class="tag-item" data-v-f875f3fc>HTML</span><span class="tag-item" data-v-f875f3fc>TypeScript</span><span class="tag-item" data-v-f875f3fc>ECMAScript</span><span class="tag-item" data-v-f875f3fc>Chrome</span><span class="tag-item" data-v-f875f3fc>游览器</span><span class="tag-item" data-v-f875f3fc>网络</span><span class="tag-item" data-v-f875f3fc>React</span><span class="tag-item" data-v-f875f3fc>Vue</span><span class="tag-item" data-v-f875f3fc>webpack</span><span class="tag-item" data-v-f875f3fc>Babel</span><span class="tag-item" data-v-f875f3fc>Vite</span><span class="tag-item" data-v-f875f3fc>Node</span><span class="tag-item" data-v-f875f3fc>HTTP</span><span class="tag-item" data-v-f875f3fc>Rollup</span><span class="tag-item" data-v-f875f3fc>Parcel</span><span class="tag-item" data-v-f875f3fc>Tool</span></i></div></div> <div class="theme-reco-content content__default"><p><img src="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/Orid6fbbep03o45XkRis.jpeg?auto=format&amp;w=1600" alt=""></p> <p>Images are a common source of performance bottlenecks for web applications and a key focus area for optimization. Unoptimized images <a href="https://almanac.httparchive.org/en/2020/page-weight#image-bytes" target="_blank" rel="noopener noreferrer">contribute to page bloat<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and currently account for over 70% of the total page weight in bytes at the 90th percentile. Multiple ways to optimize images call for an intelligent &quot;image component&quot; with performance solutions baked in as a default.</p> <p>The <a href="https://web.dev/introducing-aurora/" target="_blank" rel="noopener noreferrer">Aurora<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> team worked with <a href="https://nextjs.org/" target="_blank" rel="noopener noreferrer">Next.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to build <a href="https://nextjs.org/docs/basic-features/image-optimization#image-component" target="_blank" rel="noopener noreferrer">one such component<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. The goal was to create an optimized image template that web developers could further customize. The component serves as a good model and sets a standard for building image components in other frameworks, content management systems (CMS), and tech-stacks. We have collaborated on a similar component for <a href="https://image.nuxtjs.org/components/nuxt-img/" target="_blank" rel="noopener noreferrer">Nuxt.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, and we are working with <a href="https://angular.io/" target="_blank" rel="noopener noreferrer">Angular<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> on image optimization in future versions. This post discusses how we designed the Next.js Image component and the lessons we learned along the way.</p> <p><img src="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/NiUYg2hxW7Hi5LzdPWVo.png?auto=format&amp;w=1500" alt=""></p> <h2 id="image-optimization-issues-and-opportunities"><a href="#image-optimization-issues-and-opportunities" class="header-anchor">#</a> Image optimization issues and opportunities</h2> <p>Images not only affect performance, but also business. The number of images on a page was the second <a href="https://almanac.httparchive.org/en/2019/page-weight#bigger-complex-pages-can-be-bad-for-your-business" target="_blank" rel="noopener noreferrer">greatest predictor of conversions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> of users visiting websites. Sessions in which users converted had 38% fewer images than sessions where they did not convert. Lighthouse lists multiple <a href="https://web.dev/fast/#optimize-your-images" target="_blank" rel="noopener noreferrer">opportunities<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to optimize images and improve web vitals as part of its best practices audit. Some of the common areas where images can affect core <a href="https://web.dev/vitals/" target="_blank" rel="noopener noreferrer">web vitals<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, and user experience are as follows.</p> <h3 id="unsized-images-hurt-cls"><a href="#unsized-images-hurt-cls" class="header-anchor">#</a> Unsized images hurt CLS</h3> <p>Images served without their size specified can cause layout instability and contribute to a high Cumulative Layout Shift (<a href="https://web.dev/cls/" target="_blank" rel="noopener noreferrer">CLS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>). Setting the <code>width</code> and <code>height</code> attributes on <a href="https://web.dev/patterns/web-vitals-patterns/images/img-tag/" target="_blank" rel="noopener noreferrer">img<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> elements can help to prevent layout shifts. For example:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>flower.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>360<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>240<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The width and height should be set such that the aspect ratio of the rendered image is close to its natural aspect ratio. A significant <a href="https://web.dev/image-aspect-ratio/" target="_blank" rel="noopener noreferrer">difference in the aspect ratio<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> can result in the image looking distorted. A relatively new property that allows you to specify <a href="https://web.dev/aspect-ratio/" target="_blank" rel="noopener noreferrer">aspect-ratio in CSS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> can help to size images responsively while preventing CLS.</p> <h3 id="large-images-can-hurt-lcp"><a href="#large-images-can-hurt-lcp" class="header-anchor">#</a> Large images can hurt LCP</h3> <p>The larger the file size of an image, the longer it will take to download. A large image could be the &quot;hero&quot; image for the page or the most significant element in the viewport responsible for triggering the Largest Contentful Paint (<a href="https://web.dev/lcp/" target="_blank" rel="noopener noreferrer">LCP<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>). An image that is part of the critical content and takes a long time to download will delay the LCP.</p> <p>In many cases, developers can reduce image sizes through better compression and the use of <a href="https://developer.mozilla.org/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images#how_do_you_create_responsive_images" target="_blank" rel="noopener noreferrer">responsive<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> images. The <code>srcset</code> and <code>sizes</code> attributes of the <code>&lt;img&gt;</code> element help to provide image files with different sizes. The browser can then choose the right one depending on the screen size and resolution.</p> <h3 id="poor-image-compression-can-hurt-lcp"><a href="#poor-image-compression-can-hurt-lcp" class="header-anchor">#</a> Poor image compression can hurt LCP</h3> <p>Modern image formats like <a href="https://web.dev/compress-images-avif/" target="_blank" rel="noopener noreferrer">AVIF<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or <a href="https://web.dev/serve-images-webp/" target="_blank" rel="noopener noreferrer">WebP<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> can provide better compression than commonly used JPEG and PNG formats. Better compression reduces the file size by 25% to 50% in some cases for the same quality of the image. This reduction leads to faster downloads with less data consumption. The app should <a href="https://web.dev/uses-webp-images/" target="_blank" rel="noopener noreferrer">serve modern image formats<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to browsers that support these formats.</p> <h3 id="loading-unnecessary-images-hurts-lcp"><a href="#loading-unnecessary-images-hurts-lcp" class="header-anchor">#</a> Loading unnecessary images hurts LCP</h3> <p>Images below the fold or not in the viewport are not displayed to the user when the page is loaded. They can be deferred so that they do not contribute to the LCP and delay it. <a href="https://web.dev/lazy-loading-images/" target="_blank" rel="noopener noreferrer">Lazy-loading<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> can be used to load such images later as the user scrolls towards them.</p> <h2 id="optimization-challenges"><a href="#optimization-challenges" class="header-anchor">#</a> Optimization challenges</h2> <p>Teams can evaluate the performance cost due to the issues listed previously and implement best practice solutions to overcome them. However, this often does not happen in practice, and inefficient images continue to slow down the web. Possible reasons for this include:</p> <ul><li><p><strong>Priorities</strong>: Web developers usually tend to focus on code, JavaScript, and data optimization. As such, they may not be aware of issues with images or how to optimize them. Images created by designers or uploaded by users may not be high in the list of priorities.</p></li> <li><p><strong>Out-of-the-box solution</strong>: Even if developers are aware of the nuances of image optimization, the absence of an all-in-one out-of-the-box solution for their framework or tech-stack may be a deterrent.</p></li> <li><p><strong>Dynamic images</strong>: In addition to static images that are part of the application, dynamic images are uploaded by users or sourced from external databases or CMS's. It may be challenging to define the size of such images where the source of the image is dynamic.</p></li> <li><p><strong>Markup overload</strong>: Solutions for including the image size or <code>srcset</code> for different sizes require additional markup for every image, which can be tedious. The <code>srcset</code> attribute was introduced in 2014 but is <a href="https://almanac.httparchive.org/en/2020/media#srcset" target="_blank" rel="noopener noreferrer">used by only 26.5%<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> of the websites today. When using srcset, developers have to create images in various sizes. Tools such as <a href="https://just-gimme-an-img.vercel.app/" target="_blank" rel="noopener noreferrer">just-gimme-an-img<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> can help but have to be used manually for every image.</p></li> <li><p><strong>Browser support</strong>: Modern image formats like AVIF and WebP create smaller image files but need special handling on browsers that don't support them. Developers have to use strategies like <a href="https://developer.mozilla.org/docs/Web/HTTP/Content_negotiation" target="_blank" rel="noopener noreferrer">content negotiation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or the element so that images are served to all browsers.</p></li> <li><p><strong>Lazy loading complications</strong>: There are multiple techniques and libraries available to implement lazy-loading for below-the-fold images. Picking the best one can be a challenge. Developers may also not know the best distance from the &quot;fold&quot; to load deferred images. Different viewport sizes on devices can further complicate this.</p></li> <li><p><strong>Changing landscape</strong>: As browsers start supporting new HTML or CSS features to enhance performance, it may be difficult for developers to evaluate each of them. For example, Chrome is introducing the <a href="https://web.dev/priority-hints" target="_blank" rel="noopener noreferrer">Priority Hints<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> feature as an <a href="https://web.dev/blog/origin-trials/" target="_blank" rel="noopener noreferrer">Origin Trial<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. It can be used to boost the priority of specific images on the page. Overall, developers would find it easier if such enhancements were evaluated and implemented at the component level.</p></li></ul> <h2 id="image-component-as-a-solution"><a href="#image-component-as-a-solution" class="header-anchor">#</a> Image component as a solution</h2> <p>The opportunities available to optimize images and the challenges in implementing them individually for every application led us to the idea of an image component. An image component can encapsulate and enforce best practices. By replacing the <code>&lt;img&gt;</code> element with an image component, developers can better address their image performance woes.</p> <p>Over the last year, we have worked with the <a href="https://nextjs.org/" target="_blank" rel="noopener noreferrer">Next.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> framework to design and <a href="https://github.com/vercel/next.js/blob/canary/packages/next/client/image.tsx" target="_blank" rel="noopener noreferrer">implement<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> their <a href="https://nextjs.org/docs/api-reference/next/image" target="_blank" rel="noopener noreferrer">Image component<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. It can be used as a drop-in replacement for the existing <code>&lt;img&gt;</code> elements in Next.js apps as follows.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Before with &lt;img&gt; element:</span>
<span class="token keyword">function</span> <span class="token function">Logo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;/logo.jpg&quot;</span> alt<span class="token operator">=</span><span class="token string">&quot;logo&quot;</span> height<span class="token operator">=</span><span class="token string">&quot;200&quot;</span> width<span class="token operator">=</span><span class="token string">&quot;100&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>

<span class="token comment">// After with image component:</span>
<span class="token keyword">import</span> Image <span class="token keyword">from</span> <span class="token string">'next/image'</span>

<span class="token keyword">function</span> <span class="token function">Logo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>Image src<span class="token operator">=</span><span class="token string">&quot;/logo.jpg&quot;</span> alt<span class="token operator">=</span><span class="token string">&quot;logo&quot;</span> height<span class="token operator">=</span><span class="token string">&quot;200&quot;</span> width<span class="token operator">=</span><span class="token string">&quot;100&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>The component tries to address image-related problems generically through a rich set of features and principles. It also includes options that allow developers to customize it for various image requirements.</p> <h3 id="protection-from-layout-shifts"><a href="#protection-from-layout-shifts" class="header-anchor">#</a> Protection from layout shifts</h3> <p>As discussed previously, unsized images cause layout shifts and contribute to CLS. When using the Next.js Image component, developers must provide an image size using the <code>width</code> and <code>height</code> attributes to prevent any layout shifts. If the size is unknown, developers must specify <a href="https://nextjs.org/docs/api-reference/next/image#layout" target="_blank" rel="noopener noreferrer"><code>layout=fill</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to serve an unsized image that sits inside a sized container. Alternatively you can use static image imports to retrieve the size of the actual image on the hard drive at build time and include it in the image.</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>// Image component with width and height specified
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/logo.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

// Image component with layout specified
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/hero.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">layout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fill<span class="token punctuation">&quot;</span></span> <span class="token attr-name">objectFit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cover<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hero<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

// Image component with image import
import Image from 'next/image'
import logo from './logo.png'

function Logo() {
  return <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>{logo}</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logo<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>Since developers cannot use the Image component unsized, the design ensures that they will take the time to consider image sizing and prevent layout shifts.</p> <h3 id="facilitate-responsiveness"><a href="#facilitate-responsiveness" class="header-anchor">#</a> Facilitate responsiveness</h3> <p>To make images responsive across devices, developers must set the <code>srcset</code> and <code>sizes</code> attributes in the <code>&lt;img&gt;</code> element. We wanted to reduce this effort with the Image component. We designed the Next.js Image component to set the attribute values only once per application. We apply them to all instances of the Image component based on the layout mode. We came up with a three-part solution:</p> <ol><li><p><code>deviceSizes</code> property: This property can be used to configure breakpoints one-time based on the devices common to the application user base. The default values for breakpoints are included in the config file.</p></li> <li><p><code>imageSizes</code> property: This is also a configurable property used to get the image sizes corresponding to device size breakpoints.</p></li> <li><p><code>layout</code> attribute in each image: This is used to indicate how to use the <code>deviceSizes</code> and <code>imageSizes</code> properties for each image. The supported values for layout mode are <code>fixed</code>, <code>fill</code>, <code>intrinsic</code> and <code>responsive</code></p></li></ol> <p>When an image is requested with layout modes responsive or <em>fill</em>, Next.js identifies the image to be served based on the size of the device requesting the page and sets the <code>srcset</code> and <code>sizes</code> in the image appropriately.</p> <p>The following comparison shows how the layout mode can be used to control the size of the image on different screens. We have used a <a href="https://image-component.nextjs.gallery/layout-intrinsic" target="_blank" rel="noopener noreferrer">demo image<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> shared in the Next.js docs, viewed on a phone and a standard laptop.</p> <table><tr><th>Laptop screen</th><th>Phone screen</th></tr> <tr><td colspan="2">
        Layout = Intrinsic: Scales down to fit the container's width on smaller viewports. Does not scale up beyond the image's intrinsic size on a larger viewport. Container width is at 100%
      </td></tr> <tr><td><img src="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/qQ6WnlG5OwWX4q75ahap.png?auto=format&amp;w=400"></td> <td><img src="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/d4prulPcCUl0J4lytrBF.png?auto=format&amp;w=250"></td></tr> <tr><td colspan="2">
        Layout = Fixed: Image is not responsive. Width and height are fixed similar to `` element irrespective of the device where it is rendered.
      </td></tr> <tr><td><img src="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/UCZZHaEWh0x807gPXYhj.png?auto=format&amp;w=400"></td> <td><img src="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/pkTbqgBlpi8K5ByzUo9Y.png?auto=format&amp;w=250"></td></tr> <tr><td colspan="2">
        Layout = Responsive: Scale down or scale up depending on the width of the container on different viewports, maintaining aspect ratio.
      </td></tr> <tr><td><img src="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/DrAhreYxIqszQaszOSGD.png?auto=format&amp;w=400"></td> <td><img src="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/RasQtoFPckwrghdcfCqr.png?auto=format&amp;w=250"></td></tr> <tr><td colspan="2">
        Layout = Fill: Width and height stretched to fill the parent container. (Parent `
` width is set to 300*500 in this example)
      </td></tr> <tr><td><img src="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/XJlHRpBH4EUngVgkA43k.png?auto=format&amp;w=400"></td> <td><img src="https://web-dev.imgix.net/image/IypihH3o5cSpEMVp5i08dp69otp2/LOjRUgoxcVrxXfqptKm5.png?auto=format&amp;w=250"></td></tr></table> <h3 id="provide-built-in-lazy-loading"><a href="#provide-built-in-lazy-loading" class="header-anchor">#</a> Provide built-in lazy-loading</h3> <p>The Image component provides a built-in, performant <a href="https://nextjs.org/docs/api-reference/next/image#loading" target="_blank" rel="noopener noreferrer">lazy loading<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> solution as a default. When using the <code>&lt;img&gt;</code> element, there are a few native options for lazy loading, but they all have drawbacks that make them tricky to use. A developer might adopt one of the following lazy loading approaches:</p> <ul><li><p>Specify the <a href="https://developer.mozilla.org/docs/Web/HTML/Element/img#attr-loading" target="_blank" rel="noopener noreferrer"><code>loading</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> attribute: This is easy to implement but currently <a href="https://caniuse.com/?search=loading" target="_blank" rel="noopener noreferrer">unsupported<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> on some browsers.</p></li> <li><p>Use the <a href="https://developer.mozilla.org/docs/Web/API/Intersection_Observer_API" target="_blank" rel="noopener noreferrer">Intersection Observer API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: Building a custom lazy-loading solution requires effort and a thoughtful design and implementation. Developers may not always have the time for this.</p></li> <li><p>Import a third-party library to lazy-load images: Additional effort may be required to evaluate and integrate a suitable third-party library for lazy loading.</p></li></ul> <p>In the Next.js Image component, loading is set to <code>&quot;lazy&quot;</code> by default. Lazy loading is implemented using Intersection Observer, which is <a href="https://caniuse.com/?search=IntersectionObserver" target="_blank" rel="noopener noreferrer">available on most modern browsers<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Developers are not required to do anything extra to enable it, but they can disable it when needed.</p> <h3 id="preload-important-images"><a href="#preload-important-images" class="header-anchor">#</a> Preload important images</h3> <p>Quite often, LCP elements are images, and large images can delay LCP. It is a good idea to <a href="https://web.dev/preload-critical-assets/" target="_blank" rel="noopener noreferrer">preload critical images<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> so the browser can discover that image sooner. When using an <code>&lt;img&gt;</code> element, a preload hint may be included in the HTML head as follows.</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>preload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>important.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>A well-designed image component should offer a way to tweak the loading sequence of images, regardless of the framework used. In the case of the Next.js Image component, developers can indicate an image that is a good candidate for preload using the <a href="https://nextjs.org/docs/api-reference/next/image#priority" target="_blank" rel="noopener noreferrer"><code>priority</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> attribute of the images component.</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/hero.jpg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hero<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>400<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span> <span class="token attr-name">priority</span> <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Adding a <code>priority</code> attribute simplifies markup and is more convenient to use. Image component developers can also explore options to apply heuristics to automate preloading for above-the-fold images on the page that meet specific criteria.</p> <h3 id="encourage-high-performance-image-hosting"><a href="#encourage-high-performance-image-hosting" class="header-anchor">#</a> Encourage high-performance image hosting</h3> <p><a href="https://web.dev/image-cdns/" target="_blank" rel="noopener noreferrer">Image CDNs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> are recommended for automating image optimization, and they also support <a href="https://web.dev/uses-webp-images/" target="_blank" rel="noopener noreferrer">modern image formats<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> like WebP and AVIF. The Next.js Image component uses an image CDN by default using a <a href="https://nextjs.org/docs/api-reference/next/image#loader" target="_blank" rel="noopener noreferrer">loader architecture<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. The following example shows that the loader allows for configuration of the CDN in the Next.js config file.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">images</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'imgix'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'https://ImgApp/imgix.net'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>With this configuration, developers can use relative URLs in the image source, and the framework will concatenate the relative URL with the CDN path to generate the absolute URL. Popular image CDNs like <a href="https://imgix.com/" target="_blank" rel="noopener noreferrer">Imgix<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://cloudinary.com/" target="_blank" rel="noopener noreferrer">Cloudinary<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, and <a href="https://www.akamai.com/" target="_blank" rel="noopener noreferrer">Akamai<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> are supported. The architecture supports the use of a custom cloud provider by implementing a custom <a href="https://nextjs.org/docs/api-reference/next/image#loader" target="_blank" rel="noopener noreferrer"><code>loader</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> function for the app.</p> <h3 id="support-self-hosted-images"><a href="#support-self-hosted-images" class="header-anchor">#</a> Support self-hosted images</h3> <p>There may be situations where websites cannot use image CDNs. In such cases, an image component must support self-hosted images. The Next.js Image component uses an <a href="https://nextjs.org/docs/basic-features/image-optimization" target="_blank" rel="noopener noreferrer">image optimizer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> as a built-in image server that provides a CDN-like API. The optimizer uses <a href="https://www.npmjs.com/package/sharp" target="_blank" rel="noopener noreferrer">Sharp<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for production image transformations if it is installed on the server. This library is a good choice for anyone looking to build their own image optimization pipeline.</p> <h3 id="support-progressive-loading"><a href="#support-progressive-loading" class="header-anchor">#</a> Support progressive loading</h3> <p>Progressive loading is a technique used to hold users' interest by displaying a placeholder image usually of significantly lower quality while the actual image loads. It improves perceived performance and enhances the user experience. It can be used in combination with lazy loading for below-the-fold images or for above-the-fold images.</p> <p>The Next.js Image component supports progressive loading for the image through the <a href="https://nextjs.org/docs/api-reference/next/image#placeholder" target="_blank" rel="noopener noreferrer">placeholder<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> property. This can be used as an <a href="https://web.dev/lazy-loading-best-practices/#wrong-layout-shifting" target="_blank" rel="noopener noreferrer">LQIP<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (Low-quality image placeholder) for displaying a low-quality or blurred image while the actual image loads.</p> <h2 id="impact"><a href="#impact" class="header-anchor">#</a> Impact</h2> <p>With all the above optimizations incorporated, we have seen success with the Next.js Image component in production and are also working with other tech stacks on similar image components.</p> <p>When <a href="https://www.leboncoin.fr/" target="_blank" rel="noopener noreferrer">Leboncoin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://medium.com/leboncoin-engineering-blog/how-we-are-improving-our-web-performance-9f850d59d810" target="_blank" rel="noopener noreferrer">migrated their legacy JavaScript frontend to Next.js<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, they also upgraded their image pipeline to use the Next.js Image component. On a page that migrated from <img> to next/image, LCP went down from 2.4s to 1.7s. The total image bytes downloaded for the page went from 663kB to 326kB (with ~100kB of lazy-loaded image bytes).</p> <h2 id="lessons-learned"><a href="#lessons-learned" class="header-anchor">#</a> Lessons Learned</h2> <p>Anyone creating a Next.js app can benefit from using the Next.js Image component for optimization. However, if you want to build similar performance abstractions for another framework or CMS, the following are a few lessons we learned along the way that could be helpful.</p> <h3 id="safety-valves-can-cause-more-harm-than-good"><a href="#safety-valves-can-cause-more-harm-than-good" class="header-anchor">#</a> Safety valves can cause more harm than good</h3> <p>In an early release of the Next.js Image component, we provided a <code>unsized</code> attribute that allowed developers to bypass the sizing requirement, and use images with unspecified dimensions. We thought this would be a necessary in instances where it was impossible to know the image's height or width in advance. However, we noticed users recommending the <code>unsized</code> attribute in GitHub issues as a catch-all solution to problems with the sizing requirement, even in cases where they could solve the problem in ways that didn't worsen CLS. We subsequently deprecated and removed the <code>unsized</code> attribute.</p> <h3 id="separate-useful-friction-from-pointless-annoyance"><a href="#separate-useful-friction-from-pointless-annoyance" class="header-anchor">#</a> Separate useful friction from pointless annoyance</h3> <p>The requirement for sizing an image is an example of &quot;useful friction.&quot; It restricts the use of the component, but it provides outsized performance benefits in exchange. Users will readily accept the constraint if they have a clear picture of the potential performance benefits. Therefore, it is worthwhile to explain this tradeoff in the documentation and other published material about the component.</p> <p>However, you can find workarounds for such friction without sacrificing performance. For example, during the development of the Next.js Image component, we received complaints that it was annoying to look up sizes for locally stored images. We added <a href="https://nextjs.org/docs/basic-features/image-optimization#image-imports" target="_blank" rel="noopener noreferrer">static image imports<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, which streamline this process by automatically retrieving dimensions for local images at build time using a Babel plugin.</p> <h3 id="strike-a-balance-between-convenience-features-and-performance-optimizations"><a href="#strike-a-balance-between-convenience-features-and-performance-optimizations" class="header-anchor">#</a> Strike a balance between convenience features and performance optimizations</h3> <p>If your image component does nothing but impose &quot;useful friction&quot; on its users, developers will tend to not want to use it. We found that although performance features like image sizing and automatic generation of <code>srcset</code> values were the most important. Developer-facing convenience features like automatic lazy loading and <a href="https://nextjs.org/docs/api-reference/next/image#placeholder" target="_blank" rel="noopener noreferrer">built-in blurry placeholders<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> also drove interest in the Next.js Image component.</p> <h3 id="set-a-roadmap-for-features-to-drive-adoption"><a href="#set-a-roadmap-for-features-to-drive-adoption" class="header-anchor">#</a> Set a roadmap for features to drive adoption</h3> <p>Building a solution that works perfectly for all situations is very difficult. It can be tempting to design something that works well for 75% of people and then tell the other 25% that &quot;in these cases, this component isn't for you.&quot;</p> <p>In practice, this strategy turns out to be at odds with your goals as a component designer. You want developers to adopt your component in order to benefit from its performance benefits. This is difficult to do if there is a contingent of users that are unable to migrate and feel left out of the conversation. They are likely to express disappointment, leading to negative perceptions that affect adoption.</p> <p>It is advisable to have a roadmap for your component that covers all reasonable use cases over the long term. It also helps to be explicit in the documentation about what isn't supported and why in order to set expectations about the problems the component is intended to solve.</p> <h2 id="conclusion"><a href="#conclusion" class="header-anchor">#</a> Conclusion</h2> <p>Image usage and optimization is complicated. Developers have to find the balance between performance and quality of images while ensuring a great user experience. This makes image optimization a high-cost, high-impact endeavor.</p> <p>Instead of having each app reinvent the wheel every time, we came up with a best practices template that developers, frameworks, and other tech-stacks could use as a reference for their own implementations. This experience will indeed prove valuable as we support other frameworks, on their image components.</p> <p>The Next.js Image component has successfully improved performance outcomes in Next.js applications, thereby enhancing the user experience. We believe that it's a great model that would work well in the broader ecosystem, and we would love to hear from developers who would like to adopt this model in their projects.</p> <hr> <blockquote><ul><li>译文出自：<a href="https://github.com/FEDarling/weekly-tracker" target="_blank" rel="noopener noreferrer">weekly-tracker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 项目，期待你的加入！</li> <li><a href="https://web.dev/image-component/" target="_blank" rel="noopener noreferrer">查看原文<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>对比阅读</li> <li>发现错误？<a href="https://github.com/FEDarling/weekly-tracker/blob/main/weeklys/frontend_focus/514/building_an_effective_image_component.md" target="_blank" rel="noopener noreferrer">提交 PR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>译者：</li> <li>校对者：</li></ul></blockquote></div></section> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/FEDarling/weekly-tracker/edit/main/weeklys/frontend_focus/514/building_an_effective_image_component.md" target="_blank" rel="noopener noreferrer">发现错误？欢迎斧正</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">最后更新时间: </span> <span class="time">2022/10/14 上午1:59:14</span></div></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/frontend_focus/514/building_an_effective_image_component.html#image-optimization-issues-and-opportunities" class="sidebar-link reco-side-image-optimization-issues-and-opportunities" data-v-cb1513f6>Image optimization issues and opportunities</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend_focus/514/building_an_effective_image_component.html#unsized-images-hurt-cls" class="sidebar-link reco-side-unsized-images-hurt-cls" data-v-cb1513f6>Unsized images hurt CLS</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend_focus/514/building_an_effective_image_component.html#large-images-can-hurt-lcp" class="sidebar-link reco-side-large-images-can-hurt-lcp" data-v-cb1513f6>Large images can hurt LCP</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend_focus/514/building_an_effective_image_component.html#poor-image-compression-can-hurt-lcp" class="sidebar-link reco-side-poor-image-compression-can-hurt-lcp" data-v-cb1513f6>Poor image compression can hurt LCP</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend_focus/514/building_an_effective_image_component.html#loading-unnecessary-images-hurts-lcp" class="sidebar-link reco-side-loading-unnecessary-images-hurts-lcp" data-v-cb1513f6>Loading unnecessary images hurts LCP</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend_focus/514/building_an_effective_image_component.html#optimization-challenges" class="sidebar-link reco-side-optimization-challenges" data-v-cb1513f6>Optimization challenges</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend_focus/514/building_an_effective_image_component.html#image-component-as-a-solution" class="sidebar-link reco-side-image-component-as-a-solution" data-v-cb1513f6>Image component as a solution</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend_focus/514/building_an_effective_image_component.html#protection-from-layout-shifts" class="sidebar-link reco-side-protection-from-layout-shifts" data-v-cb1513f6>Protection from layout shifts</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend_focus/514/building_an_effective_image_component.html#facilitate-responsiveness" class="sidebar-link reco-side-facilitate-responsiveness" data-v-cb1513f6>Facilitate responsiveness</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend_focus/514/building_an_effective_image_component.html#provide-built-in-lazy-loading" class="sidebar-link reco-side-provide-built-in-lazy-loading" data-v-cb1513f6>Provide built-in lazy-loading</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend_focus/514/building_an_effective_image_component.html#preload-important-images" class="sidebar-link reco-side-preload-important-images" data-v-cb1513f6>Preload important images</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend_focus/514/building_an_effective_image_component.html#encourage-high-performance-image-hosting" class="sidebar-link reco-side-encourage-high-performance-image-hosting" data-v-cb1513f6>Encourage high-performance image hosting</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend_focus/514/building_an_effective_image_component.html#support-self-hosted-images" class="sidebar-link reco-side-support-self-hosted-images" data-v-cb1513f6>Support self-hosted images</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend_focus/514/building_an_effective_image_component.html#support-progressive-loading" class="sidebar-link reco-side-support-progressive-loading" data-v-cb1513f6>Support progressive loading</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend_focus/514/building_an_effective_image_component.html#impact" class="sidebar-link reco-side-impact" data-v-cb1513f6>Impact</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend_focus/514/building_an_effective_image_component.html#lessons-learned" class="sidebar-link reco-side-lessons-learned" data-v-cb1513f6>Lessons Learned</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend_focus/514/building_an_effective_image_component.html#safety-valves-can-cause-more-harm-than-good" class="sidebar-link reco-side-safety-valves-can-cause-more-harm-than-good" data-v-cb1513f6>Safety valves can cause more harm than good</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend_focus/514/building_an_effective_image_component.html#separate-useful-friction-from-pointless-annoyance" class="sidebar-link reco-side-separate-useful-friction-from-pointless-annoyance" data-v-cb1513f6>Separate useful friction from pointless annoyance</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend_focus/514/building_an_effective_image_component.html#strike-a-balance-between-convenience-features-and-performance-optimizations" class="sidebar-link reco-side-strike-a-balance-between-convenience-features-and-performance-optimizations" data-v-cb1513f6>Strike a balance between convenience features and performance optimizations</a></li><li class="level-3" data-v-cb1513f6><a href="/frontend_focus/514/building_an_effective_image_component.html#set-a-roadmap-for-features-to-drive-adoption" class="sidebar-link reco-side-set-a-roadmap-for-features-to-drive-adoption" data-v-cb1513f6>Set a roadmap for features to drive adoption</a></li><li class="level-2" data-v-cb1513f6><a href="/frontend_focus/514/building_an_effective_image_component.html#conclusion" class="sidebar-link reco-side-conclusion" data-v-cb1513f6>Conclusion</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><!----><!----></div></div>
    <script src="/assets/js/app.753e2338.js" defer></script><script src="/assets/js/4.c9e0fe93.js" defer></script><script src="/assets/js/1.fdc351be.js" defer></script><script src="/assets/js/57.7d0ccef5.js" defer></script><script src="/assets/js/10.830b4516.js" defer></script>
  </body>
</html>
